<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="style.css">

    <link rel="stylesheet" href="./main.css" />
</head>
<body>
    
    <div id="myList" class="place-content-center flex-1">
        
        <div class="">
            <h2>Add Name ğŸ§‘ğŸ»â€ğŸ’» </h2>
            <form id="new-task-form" action="./step1.html">
                <input type="text" name="new-task-input" id="new-task-input" placeholder="Name" />
                <a id="new-task-submit" onclick="addList()" value="Add" />ADD</a>
               
          

            
        </div>
        <div class="flex justify-center ">
            <div class="px-6 py-2 border-b border-gray-200 w-full " onclick="listAprenant()">Afficher Les apprenant</div>
            <ul  id="list_inner" class="bg-white bg-opacity-10 rounded-lg border border-gray-200 w-96 text-gray-900 ">
            </ul>
        </div>
        <button class="" type="submit" >Go !</button>
      </form>
</body>
</html>
<script>
    let listNormal = [];
    const addList = () => {
        const input = document.querySelector("#new-task-input");
        const value = input.value;
        console.log(value)
        const data = {
            name: value
        }
        fetch('http://localhost:3000/apprenant', {
            method: 'POST', // or 'PUT'
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify(data),
        })
            .then((response) => console.log(response))
            .catch((error) => {
                console.error('Error:', error);
            });
    }
            const listAprenant = () => {
            fetch('http://localhost:3000/apprenant')
            .then(data => data.json())
            .then(data =>  listNormal = data)
            console.log(listNormal)
            //
                var ul = document.getElementById('list_inner');
                for(var i=0; i<listNormal.length; i++){
                const newli = document.createElement('li');
                let value = listNormal[i].name
                newli.appendChild(document.createTextNode(value));
                ul.appendChild(newli)
                newli.setAttribute('class','px-6 py-2 border-b border-gray-200 w-full rounded-t-lg')
                
                }

            }
</script>